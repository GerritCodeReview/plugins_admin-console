{
  "comments": [
    {
      "key": {
        "uuid": "dc4d67b0_9c3fa510",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-05-24T13:23:24Z",
      "side": 1,
      "message": "Why not adding this option(--force) to the core command?",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 10,
        "endChar": 16
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cb843a6_27155a8d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1012612
      },
      "writtenOn": "2016-05-24T13:50:41Z",
      "side": 1,
      "message": "I think I\u0027m in agreement: while perhaps a good idea, I\u0027m not so sure it belongs in admin-console.  For example, I tried a similar (albeit a bit braindead, that relies on the secondary index at least somewhat working) approach in Ifc2a717c.",
      "parentUuid": "dc4d67b0_9c3fa510",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 10,
        "endChar": 16
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cb843a6_8723e6ef",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1012612
      },
      "writtenOn": "2016-05-24T13:50:41Z",
      "side": 1,
      "message": "Note that OnlineReindexer will prevent you from reindexing any version other than those currently marked for writing (which would be the latest version, unless an online reindex is pending or in progress), so this parameter may not make much sense without updating the Lucene classes as well.",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 68
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c5fffcc_267876dd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2016-05-26T06:10:08Z",
      "side": 1,
      "message": "Are you suggesting to remove this param and hard code \u002714\u0027 for the indexVersion?  I\u0027m ok with that but just wanted to clarify first.",
      "parentUuid": "3cb843a6_8723e6ef",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 68
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c5fffcc_a6622626",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1012612
      },
      "writtenOn": "2016-05-26T12:03:20Z",
      "side": 1,
      "message": "No, I\u0027d say it\u0027d be nice to get the current index value from core gerrit -- or at least document you can\u0027t roll back the index using this. :)  I realize now that the current index version may not be exposed to plugins, so that may be a limitation we have to live with.",
      "parentUuid": "1c5fffcc_267876dd",
      "range": {
        "startLine": 31,
        "startChar": 2,
        "endLine": 31,
        "endChar": 68
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cb843a6_e7266201",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1012612
      },
      "writtenOn": "2016-05-24T13:50:41Z",
      "side": 1,
      "message": "Should guard against multiple invocations to prevent two tasks from trying to run the online reindexer over the same version?\n\nAlso, what will happen if you force a reindex on the currently active version? I\u0027d imagine some not-so-nice things when you rip out Lucene\u0027s database out from under it.",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 41,
        "endChar": 22
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c5fffcc_c663a22d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2016-05-26T06:10:08Z",
      "side": 1,
      "message": "I\u0027m not sure how to guard against multiple invocations since every time you call this command it will create a new instance of the OnlineIndexer.  Also calling multiple times doesn\u0027t seem to cause any problems or at least none that i\u0027ve noticed.\n\nI\u0027m not sure what you mean by \u0027rip out Lucene\u0027s database out from under it\u0027.  Do you mean stop using lucene?   It\u0027s the only option in 2.11 so  I\u0027m not sure why you would remove it.",
      "parentUuid": "3cb843a6_e7266201",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 41,
        "endChar": 22
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c5fffcc_4658127d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1012612
      },
      "writtenOn": "2016-05-26T12:03:20Z",
      "side": 1,
      "message": "OK, my concern was wondering what would happen when you start a reindex on a live site -- if that would cause issues with search or any other functionality while the index was being rebuilt.  I mostly wanted to ensure the operation was \"safe.\"\n\nAs for guarding against multiple invocations, when I looked how core invokes the online reindexer, it looks like it starts a task and sets a flag accordingly so a new task can\u0027t be started until the other exits.  Again, I\u0027m not sure if this could actually cause problems.  (Maybe checking the task queue is enough to see if the reindexer is running?)",
      "parentUuid": "1c5fffcc_c663a22d",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 41,
        "endChar": 22
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c0c7bee_79a98788",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/adminconsole/StartReindexCommand.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2016-05-26T18:44:19Z",
      "side": 1,
      "message": "Thanks for the pointer, I do see \u0027Index all changes of project..\u0027 tasks in the task queue.  I believe gerrit just executes the tasks in FIFO order (serially) so it really shouldn\u0027t matter if there are multiple reindex requests in the queue.\n\nVerifying that it\u0027s \u0027safe\u0027 sounds like a really tough task and maybe unrealistic.  What that actually sounds like to me is.. verify that everything in gerrit works while the index is being rebuilt.  I\u0027m not sure i want to go to that length for this change.",
      "parentUuid": "1c5fffcc_4658127d",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 41,
        "endChar": 22
      },
      "revId": "24f85256a08607cc2d35473bbfbd050059e21602",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}